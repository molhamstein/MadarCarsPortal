<div id="ngx-datatable" class="page-layout simple fullwidth" fusePerfectScrollbar>

  <!-- HEADER -->
  <div class="header mat-accent-bg p-16 customHeader" fxLayout="column" fxLayoutAlign="center center" fxLayout.gt-xs="row"
    fxLayoutAlign.gt-xs="space-between center">
    <div fxLayout="column" fxLayoutAlign="center center" fxLayout.gt-xs="column" fxLayoutAlign.gt-xs="center start">
      <!-- <button style="background-color: rgba(7, 112, 7, 0.849);" mat-mini-fab class="mr-16"> -->
      <!-- </button> -->
      <span class="logo-text h1">
        <mat-icon style="color : white;" (click)="back()" class="back">arrow_back_ios</mat-icon>
        {{'CAR.EDITCAR.TITLE' | translate}}
      </span>
    </div>


  </div>
  <!-- / HEADER -->

  <!-- CONTENT -->
  <div class="content p-24">
    <form [formGroup]="editCarForm">
      <div style="width: 100%;">
        <div style="padding-top:10px;" fxLayout="column" fxLayout.gt-md="row wrap" fxLayoutAlign.gt-md="space-around center"
          fxFlex>
          <mat-form-field fxFlex="30">
            <mat-select placeholder="{{ 'CAR.BRAND' | translate }}" formControlName="brandId">
              <mat-option *ngFor="let oneBrand of brands" [value]="oneBrand.id">
                {{oneBrand.nameEn}}
              </mat-option>
            </mat-select>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field fxFlex="30">
            <input matInput placeholder="{{ 'CAR.NAME' | translate }}" formControlName="name" required>
            <mat-icon matSuffix>people</mat-icon>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>


          <mat-form-field fxFlex="30">
            <input matInput type="number" placeholder="{{ 'CAR.NUMBEROFSEAT' | translate }}" formControlName="numOfSeat"
              required>
            <mat-icon matSuffix>people</mat-icon>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field fxFlex="30">
            <input matInput (focus)="picker.open()" [matDatepicker]="picker" formControlName="productionDate"
              placeholder="{{ 'CAR.PRODUCTIONDATE' | translate }}">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>


          <mat-form-field fxFlex="30">
            <mat-select placeholder="{{ 'CAR.ENGINTYPE' | translate }}" formControlName="engineType">
              <mat-option *ngFor="let oneEngineType of engineType" [value]="oneEngineType">
                {{oneEngineType}}
              </mat-option>
            </mat-select>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field fxFlex="30">
            <mat-select placeholder="{{ 'CAR.TYPE' | translate }}" formControlName="type">
              <mat-option *ngFor="let oneType of type" [value]="oneType">
                {{oneType}}
              </mat-option>
            </mat-select>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field fxFlex="30">
            <input matInput type="number" placeholder="{{ 'CAR.PRICEPERDAY' | translate }}" formControlName="pricePerDay"
              required>
            <mat-icon matSuffix>people</mat-icon>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>


          <mat-form-field fxFlex="30">
            <input matInput type="number" placeholder="{{ 'CAR.PRICEONEWAY' | translate }}" formControlName="priceOneWay"
              required>
            <mat-icon matSuffix>people</mat-icon>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>


          <mat-form-field fxFlex="30">
            <input matInput type="number" placeholder="{{ 'CAR.PRICETOWWAY' | translate }}" formControlName="priceTowWay"
              required>
            <mat-icon matSuffix>people</mat-icon>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>

          <section class="example-section" fxFlex="96">
            <mat-checkbox fxFlex="33" [ngModelOptions]="{standalone: true}" class="example-margin" [(ngModel)]="isVip">{{
              'CAR.ISVIP' | translate }}</mat-checkbox>
            <mat-checkbox fxFlex="33" [ngModelOptions]="{standalone: true}" class="example-margin" style="padding-left: 12px;"
              [(ngModel)]="isAirportCar">{{
              'CAR.ISAIRPORTCAR' | translate }}</mat-checkbox>
            <mat-checkbox fxFlex="33" [ngModelOptions]="{standalone: true}" class="example-margin" style="padding-left: 30px;"
              [(ngModel)]="isCityCar">{{
              'CAR.ISCITYCAR' | translate }}</mat-checkbox>
          </section>

          <mat-form-field fxFlex="30">
            <mat-select placeholder="{{ 'CAR.DRIVER' | translate }}" formControlName="driverId">
              <mat-option *ngFor="let onedriver of drivers" [value]="onedriver.id">
                {{onedriver.firstName}} {{onedriver.lastName}}
              </mat-option>
            </mat-select>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>


          <mat-form-field fxFlex="30">
            <mat-select placeholder="{{ 'CAR.LOCATION' | translate }}" (selectionChange)="changeLocation($event)"
              formControlName="locationId">
              <mat-option *ngFor="let onelocation of locations" [value]="onelocation.id">
                {{onelocation.nameEn}}
              </mat-option>
            </mat-select>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>

          <mat-form-field fxFlex="30" *ngFor="let oneSublocation of carSublocations;let i=index">
            <input matInput type="number" placeholder="{{ 'CAR.COSTIN' | translate }} {{oneSublocation.name}}"
              [(ngModel)]="carSublocations[i].cost" [ngModelOptions]="{standalone: true}" required>
            <mat-icon matSuffix>people</mat-icon>
            <mat-error>{{ 'Global.ERRORFIELDREQUIRED' | translate }}</mat-error>
          </mat-form-field>


        </div>
      </div>
      <div style="width: 100%;">
        <div style="padding-top:10px;" fxLayout="column" fxLayout.gt-md="row wrap" fxLayoutAlign.gt-md="space-around center"
          fxFlex>
          <div fxFlex="40">
            <div class="divImage">
              <div>
                <div *ngIf="images.length==0 && imageOnLoad.length==0" class="">
                  <img class="imgCustim" src="{{imaageUrl}}" />
                </div>

                <div *ngFor="let value of images;let i=index" class="">
                  <img class="imgCustim" src="{{value.url}}" />
                  <div class="imgCustimLoader" [style.background-image]="'linear-gradient(-45deg, '+primaryColor+', '+secondryColor+')'"></div>
                </div>
                <div *ngFor="let image of imageOnLoad;let i = index" class="AddNewForm-imagescontainer-smallimage"
                  style="    position: relative;">
                  <img class="imgCustim" id="{{'uploadImage'+i}}" />
                  <img class="imgCustimLoader" src="assets/images/madar/infinity_loader_by_volorf.gif" />

                </div>
              </div>
            </div>
            <div class="divButton" (click)="openSelectImage()">
              <input type="file" style="display:none" id="files" accept="image/*" (change)="onChange($event)" />

              <span>
                {{ 'Global.UPLOADIMAGE' | translate }}
              </span>
            </div>
          </div>
          <div fxFlex="60">

            <div class="p-24">
              <span style="float: left;font-size: 18px;"> {{ 'CAR.FIRSTCOLOR' | translate }}</span>
              <div style="width: 25px;height: 25px;border-radius: 50%;margin-left: 120px;" [style.background-color]="primaryColor"
                [cpPosition]="'bottom'" [cpPositionOffset]="'50%'" [cpPositionRelativeToArrow]="true" [(colorPicker)]="primaryColor"></div>
            </div>

            <div class="p-24">
              <span style="float: left;font-size: 18px;"> {{ 'CAR.SECONDCOLOR' | translate }}</span>
              <div style="width: 25px;height: 25px;border-radius: 50%;margin-left: 120px;" [style.background-color]="secondryColor"
                [cpPosition]="'bottom'" [cpPositionOffset]="'50%'" [cpPositionRelativeToArrow]="true" [(colorPicker)]="secondryColor"></div>
            </div>
          </div>

          <ul class="listOfImgs">
            <li (click)="openSelectListImage()">
              <div class="listDiv">
                <img class="listImgCustim" src="{{imaageUrl}}" />
                <input type="file" style="display:none" multiple id="listFiles" accept="image/*" (change)="onChangeList($event)" />
              </div>
            </li>
            <li *ngFor="let value of listImages;let i=index" class="">
              <div class="listDiv">
                <div class="deleteImge" (click)="deleteImage(i)">
                  <mat-icon style="color : white;">close</mat-icon>
                </div>
                <img class="listImgCustim" src="{{value.url}}" />
              </div>
            </li>
            <li *ngFor="let image of listImageOnLoad;let i = index" class="AddNewForm-imagescontainer-smallimage">
              <div class="listDiv">
                <img class="listImgCustim" id="{{'uploadImage'+i}}" />
                <img class="listImgCustimLoader" src="assets/images/madar/infinity_loader_by_volorf.gif" />
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div style="float: right;">
        <button mat-button (click)="edit()" cdkFocusInitial [disabled]="editCarForm.invalid">{{'Global.EDIT'
          | translate}}</button>
      </div>
    </form>
  </div>


  <div id="contacts" class="page-layout simple left-sidenav inner-sidenav">

    <div class="header mat-accent-bg p-16 whiteCustomHeader" fxLayout="column" fxLayoutAlign="start start"
      fxLayout.gt-xs="row" fxLayoutAlign.gt-xs="space-between center">

      <!-- APP TITLE -->
      <div fxLayout="row" fxLayoutAlign="start center">

        <button mat-button class="mat-icon-button sidenav-toggle mr-12" fuseMatSidenavToggler="contacts-main-sidenav"
          fxHide.gt-md>
          <mat-icon>menu</mat-icon>
        </button>

        <div class="logo" fxLayout="row" fxLayoutAlign="start center">
          <mat-icon class="logo-icon mr-16">account_box</mat-icon>
          <span class="logo-text h1">{{'SUBCAR.ALLSUBCAR.TITLE' | translate}}</span>
        </div>

      </div>
      <!-- / APP TITLE -->

      <!-- SEARCH -->
      <div class="search-input-wrapper mt-16 ml-8 m-sm-0" fxLayout="row" fxLayoutAlign="start center">
        <label for="search" class="mr-8">
          <mat-icon>search</mat-icon>
        </label>
        <mat-form-field mat-no-float class="m-0" floatPlaceholder="never">
          <input matInput id="search" [(ngModel)]="filterValue" (ngModelChange)="filterDatatable()" placeholder="{{'SUBCAR.ALLSUBCAR.SEARCH'| translate}}">
        </mat-form-field>
        <button mat-button class="customButtom" color="primary" type="button" (click)="addSublocation()">{{'SUBCAR.ALLSUBCAR.ADDSUBCAR'
          | translate}}</button>

      </div>
      <!-- / SEARCH -->


    </div>

    <ngx-datatable class="material vertical-scroll" [rows]="filterRows" [columnMode]="'force'" [headerHeight]="50"
      [rowHeight]="50" [footerHeight]="50" [scrollbarV]="false" [scrollbarH]="true">
      <ngx-datatable-column [canAutoResize]="true" [flexGrow]="1" prop="nameAr">
        <ng-template let-column="column" ngx-datatable-header-template let-sort="sortFn">
          <span>{{ 'SUBCAR.NAMEAR' | translate }}</span>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column [canAutoResize]="true" [flexGrow]="1" prop="nameEn">
        <ng-template let-column="column" ngx-datatable-header-template let-sort="sortFn">
          <span>{{ 'SUBCAR.NAMEEN' | translate }}</span>
        </ng-template>

      </ngx-datatable-column>
      <ngx-datatable-column [canAutoResize]="true" [flexGrow]="1" prop="nameTr">
        <ng-template let-column="column" ngx-datatable-header-template let-sort="sortFn">
          <span>{{ 'SUBCAR.NAMETR' | translate }}</span>
        </ng-template>

      </ngx-datatable-column>


      <ngx-datatable-column [canAutoResize]="true" [flexGrow]="1" prop="Status">
        <ng-template let-column="column" ngx-datatable-header-template let-sort="sortFn">
          <span>{{ 'SUBCAR.STATUS' | translate }}</span>
        </ng-template>
        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
          <mat-chip-list *ngIf="row.status=='active'">
            <mat-chip style="background-color:green" selected="true">{{row.status}}</mat-chip>
          </mat-chip-list>
          <mat-chip-list *ngIf="row.status=='deactive'">
            <mat-chip style="background-color:#ff6363" selected="true">{{row.status}}</mat-chip>
          </mat-chip-list>
        </ng-template>
      </ngx-datatable-column>

      <ngx-datatable-column [width]="200" name="id">
        <ng-template let-column="column" ngx-datatable-header-template>
          <div class="table-header-font">

          </div>
        </ng-template>

        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
          <button mat-mini-fab class="mr-16" (click)="goTo('edit',row['id'])" style="background-color: rgba(20, 160, 202, 0.911);">
            <mat-icon style="color : white;">edit</mat-icon>
          </button>
          <button mat-mini-fab *ngIf="row.status=='active'" class="mr-16" (click)="deactivate(row['id'])" style="background-color: rgba(219, 18, 18, 0.808);">
            <mat-icon style="color : white;">delete</mat-icon>
          </button>
          <button mat-mini-fab *ngIf="row.status=='deactive'" class="mr-16" (click)="activate(row['id'])" style="background-color: rgba(219, 18, 18, 0.808);">
            <mat-icon style="color : white;">replay</mat-icon>
          </button>
          <!-- <button mat-mini-fab class="mr-16" style="background-color: rgba(7, 112, 7, 0.849);" (click)="view(row['id'])">
              <mat-icon style="color : white;">visibility</mat-icon>
            </button> -->
        </ng-template>

      </ngx-datatable-column>

    </ngx-datatable>

  </div>

</div>
